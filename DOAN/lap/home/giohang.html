<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gi·ªè h√†ng - Th·ªùi trang xu h∆∞·ªõng</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer"/>
</head>
<body class="bg-gray-50 text-gray-800">

  <header class="bg-white shadow fixed w-full z-50">
    <div class="max-w-6xl mx-auto flex items-center justify-between px-4 py-3">
      <a href="../../lap/home/home.html" class="flex items-center gap-2 hover:scale-105 transition">
        <img src="../../images/v115_2498.jpg" alt="Logo" class="w-7 h-7">
        <span class="font-semibold text-sm hidden sm:inline">Th·ªùi trang xu h∆∞·ªõng</span>
      </a>

      <div class="hidden md:flex items-center gap-6">
        <nav class="flex gap-6 text-sm">
          <a href="../../lap/home/home.html" class="hover:underline transition duration-200 hover:text-black transform hover:scale-105">Trang ch·ªß</a>
          <a href="../../lap/home/sanpham.html" class="hover:underline transition duration-200 hover:text-black transform hover:scale-105">S·∫£n ph·∫©m</a>
          <a href="../../lap/home/bosanphammoi.html" class="hover:underline transition duration-200 hover:text-black transform hover:scale-105">B·ªô s∆∞u t·∫≠p m·ªõi</a>
          <a href="../../lap/home/uudai.html" class="hover:underline transition duration-200 hover:text-black transform hover:scale-105">∆Øu ƒë√£i</a>
          <a href="../../lap/home/lienhe.html" class="hover:underline transition duration-200 hover:text-black transform hover:scale-105">Li√™n h·ªá</a>
          <a href="../../lap/home/giohang.html" class="text-xl transition duration-200 hover:text-black transform hover:scale-110 relative">
            <i class="fa-solid fa-cart-shopping"></i>
            <span id="cart-count" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center hidden">0</span>
          </a>
        </nav>
        <div id="login-section" class="flex gap-2"> 
          <a href="dangnhap.html" class="text-sm border px-3 py-1 rounded transition duration-200 hover:bg-gray-200">ƒêƒÉng nh·∫≠p</a>
          <a href="dangky.html" class="text-sm bg-black text-white px-3 py-1 rounded transition duration-200 transform hover:scale-105 hover:bg-gray-800">ƒêƒÉng k√Ω</a>
        </div>
      </div>

      <div class="flex items-center gap-4 md:hidden"> 
        <a href="../../lap/home/giohang.html" class="text-xl transition duration-200 hover:text-black transform hover:scale-110 relative">
          <i class="fa-solid fa-cart-shopping"></i>
          <span id="cart-count-mobile" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center hidden">0</span>
        </a>
        <button id="mobile-menu-btn" class="text-2xl hover:text-gray-600 transition duration-200">
          <i class="fa-solid fa-bars"></i> 
        </button>
      </div>
    </div>

    <div id="mobile-menu-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden md:hidden"></div>
    
    <div id="mobile-menu" class="fixed top-0 right-0 h-full w-80 bg-white shadow-2xl transform translate-x-full transition-transform duration-300 z-50 md:hidden">
      <div class="flex items-center justify-between p-4 border-b">
        <h3 class="text-lg font-semibold">Menu</h3>
        <button id="close-menu-btn" class="text-2xl hover:text-gray-600 transition duration-200">
          <i class="fa-solid fa-times"></i>
        </button>
      </div>
      
      <nav class="p-4">
        <ul class="space-y-4">
          <li>
            <a href="../../lap/home/home.html" class="block py-3 px-4 rounded-lg hover:bg-gray-100 transition duration-200 flex items-center gap-3">
              <i class="fa-solid fa-home w-5"></i>
              <span>Trang ch·ªß</span>
            </a>
          </li>
          <li>
            <a href="../../lap/home/sanpham.html" class="block py-3 px-4 rounded-lg hover:bg-gray-100 transition duration-200 flex items-center gap-3">
              <i class="fa-solid fa-shirt w-5"></i>
              <span>S·∫£n ph·∫©m</span>
            </a>
          </li>
          <li>
            <a href="../../lap/home/bosanphammoi.html" class="block py-3 px-4 rounded-lg hover:bg-gray-100 transition duration-200 flex items-center gap-3">
              <i class="fa-solid fa-star w-5"></i>
              <span>B·ªô s∆∞u t·∫≠p m·ªõi</span>
            </a>
          </li>
          <li>
            <a href="../../lap/home/uudai.html" class="block py-3 px-4 rounded-lg hover:bg-gray-100 transition duration-200 flex items-center gap-3">
              <i class="fa-solid fa-tag w-5"></i>
              <span>∆Øu ƒë√£i</span>
            </a>
          </li>
          <li>
            <a href="../../lap/home/lienhe.html" class="block py-3 px-4 rounded-lg hover:bg-gray-100 transition duration-200 flex items-center gap-3">
              <i class="fa-solid fa-phone w-5"></i>
              <span>Li√™n h·ªá</span>
            </a>
          </li>
        </ul>
        
        <div id="mobile-login-section" class="mt-8 space-y-3">
          <a href="dangnhap.html" class="block text-center py-3 px-4 border rounded-lg hover:bg-gray-100 transition duration-200">
            ƒêƒÉng nh·∫≠p
          </a>
          <a href="dangky.html" class="block text-center py-3 px-4 bg-black text-white rounded-lg hover:bg-gray-800 transition duration-200">
            ƒêƒÉng k√Ω
          </a>
        </div>
      </nav>
    </div>
  </header>

  <section class="max-w-4xl mx-auto p-6 pt-24">
    <h2 class="text-xl md:text-2xl font-semibold mb-4 text-center">üõí Gi·ªè h√†ng c·ªßa b·∫°n</h2>
    <div id="cart-items" class="space-y-4">
      <p id="empty-cart" class="text-gray-500 text-center">Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o trong gi·ªè.</p>
    </div>

    <div id="cart-total" class="text-right mt-6 hidden">
      <p class="text-2xl font-bold text-black">T·ªïng ti·ªÅn: <br><span id="total-price" class="text-3xl text-black font-bold">0</span>ƒë</p>
    </div>

    <div class="mt-6 text-center">
      <a href="thanhtoan.html" id="checkout-btn" class="block w-full text-center bg-black text-white py-3 rounded text-lg font-semibold hover:bg-gray-800 transition">THANH TO√ÅN</a>
    </div>
  </section>

  <footer class="bg-white border-t mt-12 py-8">
    <div class="max-w-6xl mx-auto px-4 grid grid-cols-1 md:grid-cols-4 gap-6 text-sm text-gray-600 items-start">
      <div class="flex items-start pt-1 space-x-4">
        <a href="#" class="hover:text-black transform hover:scale-110 transition duration-300"><i class="fab fa-x-twitter fa-lg"></i></a>
        <a href="#" class="hover:text-black transform hover:scale-110 transition duration-300"><i class="fab fa-instagram fa-lg"></i></a>
        <a href="#" class="hover:text-black transform hover:scale-110 transition duration-300"><i class="fab fa-youtube fa-lg"></i></a>
        <a href="#" class="hover:text-black transform hover:scale-110 transition duration-300"><i class="fab fa-linkedin fa-lg"></i></a>
      </div>

      <div>
        <p class="text-base font-bold text-black mb-2">Use cases</p>
        <ul class="space-y-1">
          <li><a href="#" class="hover:text-black transition duration-200">Th·ªùi trang nam</a></li>
          <li><a href="#" class="hover:text-black transition duration-200">Th·ªùi trang n·ªØ</a></li>
          <li><a href="#" class="hover:text-black transition duration-200">Ph·ª• ki·ªán</a></li>
          <li><a href="uudai.html" class="hover:text-black transition duration-200">∆Øu ƒë√£i</a></li>
        </ul>
      </div>

      <div>
        <p class="text-base font-bold text-black mb-2">Explore</p>
        <ul class="space-y-1">
          <li><a href="bosanphammoi.html" class="hover:text-black transition duration-200">B·ªô s∆∞u t·∫≠p m·ªõi</a></li>
          <li><a href="sanpham.html" class="hover:text-black transition duration-200">S·∫£n ph·∫©m b√°n ch·∫°y</a></li>
          <li><a href="giohang.html" class="hover:text-black transition duration-200">Gi·ªè h√†ng</a></li>
        </ul>
      </div>

      <div>
        <p class="text-base font-bold text-black mb-2">Resources</p>
        <ul class="space-y-1">
          <li><a href="#" class="hover:text-black transition duration-200">Ch√≠nh s√°ch mua h√†ng</a></li>
          <li><a href="#" class="hover:text-black transition duration-200">H·ªó tr·ª£ kh√°ch h√†ng</a></li>
          <li><a href="lienhe.html" class="hover:text-black transition duration-200">Li√™n h·ªá</a></li>
        </ul>
      </div>
    </div>

    <div class="mt-6 text-center text-xs text-gray-400">
      &copy; 2025 Th·ªùi trang xu h∆∞·ªõng. All rights reserved.
    </div>
  </footer>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      // Mobile menu functionality
      const mobileMenuBtn = document.getElementById('mobile-menu-btn');
      const mobileMenu = document.getElementById('mobile-menu');
      const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
      const closeMenuBtn = document.getElementById('close-menu-btn');

      function openMobileMenu() {
        if (mobileMenu) mobileMenu.classList.remove('translate-x-full');
        if (mobileMenuOverlay) mobileMenuOverlay.classList.remove('hidden');
        document.body.style.overflow = 'hidden'; // NgƒÉn cu·ªôn trang ch√≠nh khi menu m·ªü
      }

      function closeMobileMenu() {
        if (mobileMenu) mobileMenu.classList.add('translate-x-full');
        if (mobileMenuOverlay) mobileMenuOverlay.classList.add('hidden');
        document.body.style.overflow = ''; // Cho ph√©p cu·ªôn l·∫°i
      }

      if (mobileMenuBtn) mobileMenuBtn.addEventListener('click', openMobileMenu);
      if (closeMenuBtn) closeMenuBtn.addEventListener('click', closeMobileMenu);
      if (mobileMenuOverlay) mobileMenuOverlay.addEventListener('click', closeMobileMenu);

      // Close menu when clicking on menu items inside mobile menu
      if (mobileMenu) {
        const mobileMenuLinks = mobileMenu.querySelectorAll('a');
        mobileMenuLinks.forEach(link => {
          link.addEventListener('click', closeMobileMenu);
        });
      }

      // --- Logic x·ª≠ l√Ω ƒëƒÉng nh·∫≠p/ƒëƒÉng xu·∫•t ---
      const loggedInUser = JSON.parse(localStorage.getItem("loggedInUser"));
      const loginSection = document.getElementById("login-section"); 
      const mobileLoginSection = document.getElementById("mobile-login-section"); 

      function updateAuthUI() {
          if (loggedInUser) {
              // Desktop header
              if (loginSection) {
                  loginSection.innerHTML = `
                      <div class="text-sm flex items-center gap-3">
                          <span class="text-gray-700">Xin ch√†o, <strong>${loggedInUser.name}</strong></span>
                          <button id="logoutBtn" class="text-xs text-red-500 hover:underline transition duration-200">ƒêƒÉng xu·∫•t</button>
                      </div>
                  `;
                  const logoutBtn = document.getElementById("logoutBtn");
                  if (logoutBtn) {
                      logoutBtn.addEventListener("click", () => {
                          localStorage.removeItem("loggedInUser");
                          // ƒê√£ s·ª≠a ƒë∆∞·ªùng d·∫´n ·ªü ƒë√¢y
                          window.location.href = "dangnhap.html"; 
                      });
                  }
              }

              // Mobile menu
              if (mobileLoginSection) {
                  mobileLoginSection.innerHTML = `
                      <div class="mt-8 space-y-3">
                          <span class="block text-center py-3 px-4 rounded-lg bg-gray-100 text-gray-700">Xin ch√†o, <strong>${loggedInUser.name}</strong></span>
                          <button id="mobileLogoutBtn" class="block w-full text-center py-3 px-4 bg-black text-white rounded-lg hover:bg-gray-800 transition duration-200">ƒêƒÉng xu·∫•t</button>
                      </div>
                  `;
                  const mobileLogoutBtn = document.getElementById("mobileLogoutBtn");
                  if (mobileLogoutBtn) {
                      mobileLogoutBtn.addEventListener("click", () => {
                          localStorage.removeItem("loggedInUser");
                          // ƒê√£ s·ª≠a ƒë∆∞·ªùng d·∫´n ·ªü ƒë√¢y
                          window.location.href = "dangnhap.html"; 
                      });
                  }
              }
          } else {
              // Desktop header (ensure original buttons are present if no user)
              if (loginSection) {
                  loginSection.innerHTML = `
                      <a href="dangnhap.html" class="text-sm border px-3 py-1 rounded transition duration-200 hover:bg-gray-200">ƒêƒÉng nh·∫≠p</a>
                      <a href="dangky.html" class="text-sm bg-black text-white px-3 py-1 rounded transition duration-200 transform hover:scale-105 hover:bg-gray-800">ƒêƒÉng k√Ω</a>
                  `;
              }
              // Mobile menu (ensure original buttons are present if no user)
              if (mobileLoginSection) {
                  mobileLoginSection.innerHTML = `
                      <div class="mt-8 space-y-3">
                          <a href="dangnhap.html" class="block text-center py-3 px-4 border rounded-lg hover:bg-gray-100 transition duration-200">ƒêƒÉng nh·∫≠p</a>
                          <a href="dangky.html" class="block text-center py-3 px-4 bg-black text-white rounded-lg hover:bg-gray-800 transition duration-200">ƒêƒÉng k√Ω</a>
                      </div>
                  `;
              }
          }
      }

      // Initial call to update UI based on login status
      updateAuthUI();

      // --- Logic x·ª≠ l√Ω gi·ªè h√†ng ---
      const cartItemsContainer = document.getElementById("cart-items"); 
      const checkoutBtn = document.getElementById("checkout-btn");
      const emptyCart = document.getElementById("empty-cart");
      const cartTotal = document.getElementById("cart-total");
      const totalPriceDisplay = document.getElementById("total-price");

      let cart = JSON.parse(localStorage.getItem("cart")) || [];

      function updateCart() {
        localStorage.setItem("cart", JSON.stringify(cart));
        renderCart();
        updateCartCount(); // C·∫≠p nh·∫≠t s·ªë ƒë·∫øm tr√™n bi·ªÉu t∆∞·ª£ng gi·ªè h√†ng sau m·ªói l·∫ßn thay ƒë·ªïi gi·ªè
      }

      function renderCart() {
        if (cartItemsContainer) { 
          cartItemsContainer.innerHTML = "";
          let total = 0;

          if (cart.length === 0) {
            if (emptyCart) emptyCart.classList.remove("hidden");
            if (cartTotal) cartTotal.classList.add("hidden");
            if (checkoutBtn) checkoutBtn.classList.add("hidden");
            return;
          }

          if (emptyCart) emptyCart.classList.add("hidden");
          if (cartTotal) cartTotal.classList.remove("hidden");
          if (checkoutBtn) checkoutBtn.classList.remove("hidden");

          cart.forEach((item, index) => {
            const quantity = item.quantity || 1;
            const itemTotal = item.price * quantity;
            total += itemTotal;

            const div = document.createElement("div");
            div.className = "bg-white p-4 rounded shadow flex items-center gap-6";

            div.innerHTML = `
              <div class="flex items-center gap-4 flex-1">
                <img src="${item.image || '../../images/default.jpg'}" alt="${item.name}" class="w-20 h-20 object-cover rounded" />
                <div>
                  <p class="font-medium text-lg">${item.name}</p>
                  <p class="text-sm text-gray-500">Gi√°: ${item.price.toLocaleString()}ƒë</p>
                </div>
              </div>
              <div class="flex items-center gap-2">
                <button class="decrease px-2 py-1 text-sm border rounded bg-gray-100" data-index="${index}">-</button>
                <span class="quantity w-8 text-center">${quantity}</span>
                <button class="increase px-2 py-1 text-sm border rounded bg-gray-100" data-index="${index}">+</button>
              </div>
              <button class="text-red-500 text-sm remove-item ml-4" data-index="${index}">X√≥a</button>
            `;
            cartItemsContainer.appendChild(div);
          });

          if (totalPriceDisplay) {
            totalPriceDisplay.textContent = total.toLocaleString();
          }
          attachEvents();
        }
      }

      function attachEvents() {
        document.querySelectorAll(".remove-item").forEach(button => {
          button.addEventListener("click", () => {
            const index = parseInt(button.getAttribute("data-index"));
            cart.splice(index, 1);
            updateCart();
          });
        });

        document.querySelectorAll(".increase").forEach(button => {
          button.addEventListener("click", () => {
            const index = parseInt(button.getAttribute("data-index"));
            cart[index].quantity = (cart[index].quantity || 1) + 1;
            updateCart();
          });
        });

        document.querySelectorAll(".decrease").forEach(button => {
          button.addEventListener("click", () => {
            const index = parseInt(button.getAttribute("data-index"));
            cart[index].quantity = Math.max(1, (cart[index].quantity || 1) - 1);
            updateCart();
          });
        });
      }

      // H√†m c·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng s·∫£n ph·∫©m trong gi·ªè h√†ng tr√™n bi·ªÉu t∆∞·ª£ng
      function updateCartCount() {
        const currentCart = JSON.parse(localStorage.getItem("cart")) || []; 
        const cartCountElement = document.getElementById('cart-count');
        const cartCountMobileElement = document.getElementById('cart-count-mobile');
        
        if (currentCart.length > 0) {
          const totalItems = currentCart.reduce((sum, item) => sum + item.quantity, 0);
          if (cartCountElement) { 
            cartCountElement.textContent = totalItems;
            cartCountElement.classList.remove('hidden');
          }
          if (cartCountMobileElement) { 
            cartCountMobileElement.textContent = totalItems;
            cartCountMobileElement.classList.remove('hidden');
          }
        } else {
          if (cartCountElement) cartCountElement.classList.add('hidden');
          if (cartCountMobileElement) cartCountMobileElement.classList.add('hidden');
        }
      }

      // Kh·ªüi t·∫°o gi·ªè h√†ng v√† s·ªë ƒë·∫øm khi t·∫£i trang
      renderCart();
      updateCartCount();
    });
  </script>
</body>
</html>